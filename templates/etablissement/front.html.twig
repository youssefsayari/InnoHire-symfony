{% extends 'baseFront.html.twig' %}
{% block title %}Etablissement index
{% endblock %}


{% block etablissement %}
	<!-- Projects Start -->
			<div class="container-xxl py-5">
				<div class="container py-5 px-lg-5">
					<div class="wow fadeInUp" data-wow-delay="0.1s">
						<p class="section-title text-secondary justify-content-center">
							<span></span>
							Nos Etablissement

							<span></span>
						</p>


						<h1 class="text-center mb-5">
							Recently Added Establishment

						</h1>
					</div>
					<div class="row mt-n2 wow fadeInUp" data-wow-delay="0.3s">
						<div class="col-12 text-center">
							<ul class="list-inline mb-5" id="portfolio-flters">
								<li class="mx-2 active" data-filter="*">
									All

								</li>
								<li class="mx-2" data-filter=".ecole">
									Ecole

								</li>
								<li class="mx-2" data-filter=".college">
									College

								</li>
								<li class="mx-2" data-filter=".lycee">
									Lycee

								</li>
								<li class="mx-2" data-filter=".faculte">
									Faculte

								</li>
								<a href="{{ path('app_etablissement_newFront') }}" class="btn btn-secondary py-sm-3 px-sm-5 rounded-pill me-3 animated slideInLeft">
    + Add New
</a> 

							</ul>
						</div>
					</div>


					
					<div class="row g-4 portfolio-container">
					{% for etablissement in etablissements %}
						<div class="col-lg-4 col-md-6 portfolio-item {{ etablissement.typeEtablissement|lower }} wow fadeInUp" data-wow-delay="0.1s">
							<div class="rounded overflow-hidden">
								<div class="position-relative overflow-hidden" style="width: 400px; height: 250px;">
								
									<img class="img-fluid w-100" src="{{ asset('imagesEtablissements/' ~ etablissement.image) }}" alt="">
									<div class="portfolio-overlay">
										<a class="btn btn-square btn-outline-light mx-1" href="{{ asset('imagesEtablissements/' ~ etablissement.image) }}" data-lightbox="portfolio">
											<i class="fa fa-eye"></i>
										</a>
										<a class="btn btn-square btn-outline-light mx-1" href="">
											<i class="fa fa-link"></i>
										</a>
										
										 <form action="{{ path('app_etablissement_deleteFront', {'id': etablissement.id}) }}" method="post" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet établissement ?')">
                        <input type="hidden" name="_method" value="DELETE">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ etablissement.id) }}">
                        <button type="submit" class="btn btn-square btn-outline-light mx-1">
                            <i class="fa fa-trash"></i>
                        </button>
                    </form>
										
									</div>
								</div>
								<div class="bg-light p-4">
									<p class="text-primary fw-medium mb-2">
										Code : {{ etablissement.codeEtablissement }}

									</p>
									<h5 class="lh-base mb-0">
										Nom : {{ etablissement.nom }}

									</a>
									<h5 class="lh-base mb-0">
										Lieu : {{ etablissement.lieu }}

									</a>
									<h5 class="lh-base mb-0">
										Type : {{ etablissement.typeEtablissement }}

									</a>
									<h5 class="lh-base mb-0">
										User : {{ etablissement.getUtilisateur().getNom() }}

									</a>
									<h5 class="lh-base mb-0">
										User : {{ etablissement.getWallet().getBalance() }}

									</a>
								</div>
							</div>
						</div>
					{% endfor %}
					</div>
					
				</div>
			</div>
			<!-- Projects End -->







<script>
        // Fonction pour filtrer les établissements en fonction du type sélectionné
        function filterEtablissements(type) {
            // Récupérer tous les éléments de la classe 'portfolio-item'
            var items = document.querySelectorAll('.portfolio-item');

            // Parcourir tous les éléments
            items.forEach(function(item) {
                // Vérifier si l'élément a la classe correspondant au type sélectionné
                if (type === '*' || item.classList.contains(type)) {
                    // Afficher l'élément s'il correspond au type sélectionné
                    item.style.display = 'block';
                } else {
                    // Masquer l'élément s'il ne correspond pas au type sélectionné
                    item.style.display = 'none';
                }
            });
        }

        // Écouter les clics sur les éléments du filtre
        document.querySelectorAll('#portfolio-flters li').forEach(function(filter) {
            filter.addEventListener('click', function() {
                // Supprimer la classe active de tous les filtres
                document.querySelectorAll('#portfolio-flters li').forEach(function(item) {
                    item.classList.remove('active');
                });

                // Ajouter la classe active au filtre cliqué
                filter.classList.add('active');

                // Récupérer le type correspondant au filtre cliqué
                var type = filter.getAttribute('data-filter');

                // Filtrer les établissements en fonction du type sélectionné
                filterEtablissements(type);
            });
        });
    </script>







{% endblock %}
